<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<!-- 
    FXML para Dashboard de Usuario - SyncUp
    RF-028: Interfaz JavaFX moderna para usuarios
    Implementa RF-002, RF-005, RF-006, RF-007, RF-008, RF-009
    Author: Alejandro MarÃ­n HernÃ¡ndez
-->

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.syncup.controllers.UserDashboardController">
   <top>
      <!-- Header con bienvenida y navegaciÃ³n -->
      <VBox styleClass="dashboard-container">
         <HBox alignment="CENTER_LEFT" spacing="20.0">
            <VBox alignment="CENTER_LEFT">
               <Label fx:id="welcomeLabel" styleClass="app-title" text="Â¡Bienvenido a SyncUp!" />
               <Label fx:id="userStatsLabel" styleClass="app-subtitle" text="Cargando estadÃ­sticas..." />
            </VBox>
            <Region HBox.hgrow="ALWAYS" />
            <HBox alignment="CENTER_RIGHT" spacing="10.0">
               <ProgressIndicator fx:id="loadingIndicator" prefHeight="24.0" prefWidth="24.0" visible="false" />
               <Label fx:id="statusLabel" styleClass="success-message" text="Listo" />
            </HBox>
            <padding>
               <Insets bottom="20.0" left="30.0" right="30.0" top="20.0" />
            </padding>
         </HBox>
      </VBox>
   </top>
   
   <left>
      <!-- Sidebar de navegaciÃ³n -->
      <VBox prefWidth="250.0" styleClass="sidebar">
         <VBox spacing="10.0">
            <Label styleClass="section-title" text="Mi Biblioteca" />
            <Button styleClass="nav-button" text="ðŸŽµ Favoritos" />
            <Button styleClass="nav-button" text="ðŸ“‹ Playlists" />
            <Button styleClass="nav-button" text="ðŸŽ§ Descubrir" />
            
            <Separator />
            
            <Label styleClass="section-title" text="Social" />
            <Button styleClass="nav-button" text="ðŸ‘¥ Siguiendo" />
            <Button styleClass="nav-button" text="âœ¨ Sugerencias" />
            
            <Separator />
            
            <Label styleClass="section-title" text="Herramientas" />
            <Button fx:id="exportFavoritesButton" onAction="#handleExportFavorites" styleClass="nav-button" text="ðŸ“„ Exportar Favoritos" />
            
            <padding>
               <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
            </padding>
         </VBox>
      </VBox>
   </left>
   
   <center>
      <!-- Ãrea principal con tabs -->
      <TabPane tabClosingPolicy="UNAVAILABLE">
         
         <!-- Tab de Perfil (RF-002) -->
         <Tab text="ðŸ‘¤ Mi Perfil">
            <ScrollPane fitToWidth="true">
               <VBox spacing="20.0" styleClass="content-panel">
                  <VBox spacing="15.0">
                     <Label styleClass="section-title" text="InformaciÃ³n Personal" />
                     
                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label styleClass="field-label" text="Nombre Completo:" />
                        <TextField fx:id="nombreCompletoField" prefWidth="250.0" promptText="Ingresa tu nombre completo" styleClass="login-field" />
                     </HBox>
                     
                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label styleClass="field-label" text="Email:" />
                        <TextField fx:id="emailField" prefWidth="250.0" promptText="Ingresa tu email" styleClass="login-field" />
                     </HBox>
                     
                     <Button fx:id="saveProfileButton" onAction="#handleSaveProfile" styleClass="primary-button" text="Guardar Cambios" />
                  </VBox>
                  
                  <Separator />
                  
                  <!-- SecciÃ³n de Favoritos -->
                  <VBox spacing="15.0">
                     <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <Label styleClass="section-title" text="Mis Canciones Favoritas" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="removeFavoriteButton" onAction="#handleRemoveFavorite" styleClass="danger-button" text="Remover Seleccionada" />
                     </HBox>
                     
                     <TableView fx:id="favoritesTable" prefHeight="300.0">
                        <columns>
                           <TableColumn fx:id="favTitleColumn" prefWidth="200.0" text="TÃ­tulo" />
                           <TableColumn fx:id="favArtistColumn" prefWidth="150.0" text="Artista" />
                           <TableColumn fx:id="favGenreColumn" prefWidth="100.0" text="GÃ©nero" />
                        </columns>
                        <columnResizePolicy>
                           <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                     </TableView>
                  </VBox>
                  
                  <padding>
                     <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                  </padding>
               </VBox>
            </ScrollPane>
         </Tab>
         
         <!-- Tab de Descubrimiento (RF-005, RF-006) -->
         <Tab text="ðŸŽ§ Descubrir">
            <VBox spacing="20.0" styleClass="content-panel">
               
               <!-- Descubrimiento Semanal (RF-005) -->
               <VBox spacing="15.0">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="section-title" text="ðŸŽ† Descubrimiento Semanal" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="generateDiscoveryButton" onAction="#handleGenerateDiscovery" styleClass="primary-button" text="Generar Playlist" />
                  </HBox>
                  
                  <Label styleClass="section-subtitle" text="MÃºsica personalizada basada en tus gustos" />
                  
                  <TableView fx:id="discoveryTable" prefHeight="200.0">
                     <columns>
                        <TableColumn fx:id="discTitleColumn" prefWidth="200.0" text="TÃ­tulo" />
                        <TableColumn fx:id="discArtistColumn" prefWidth="150.0" text="Artista" />
                        <TableColumn fx:id="discGenreColumn" prefWidth="100.0" text="GÃ©nero" />
                     </columns>
                  </TableView>
               </VBox>
               
               <Separator />
               
               <!-- Radio Personalizada (RF-006) -->
               <VBox spacing="15.0">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="section-title" text="ðŸ“¡ Radio Personalizada" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="generateRadioButton" onAction="#handleGenerateRadio" styleClass="primary-button" text="Crear Radio" />
                  </HBox>
                  
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="field-label" text="Basada en:" />
                     <ComboBox fx:id="seedSongComboBox" prefWidth="300.0" promptText="Selecciona una canciÃ³n semilla" />
                  </HBox>
                  
                  <TableView fx:id="radioTable" prefHeight="200.0">
                     <columns>
                        <TableColumn fx:id="radioTitleColumn" prefWidth="200.0" text="TÃ­tulo" />
                        <TableColumn fx:id="radioArtistColumn" prefWidth="150.0" text="Artista" />
                     </columns>
                  </TableView>
               </VBox>
               
               <HBox alignment="CENTER" spacing="10.0">
                  <Button fx:id="addToFavoritesButton" onAction="#handleAddToFavorites" styleClass="secondary-button" text="â™¥ Agregar a Favoritos" />
               </HBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </VBox>
         </Tab>
         
         <!-- Tab de BÃºsqueda (RF-003, RF-004) -->
         <Tab text="ðŸ” Buscar">
            <VBox spacing="20.0" styleClass="content-panel">
               
               <!-- Campo de bÃºsqueda con autocompletado (RF-003) -->
               <VBox spacing="10.0">
                  <Label styleClass="section-title" text="BÃºsqueda de MÃºsica" />
                  
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <ComboBox fx:id="searchTypeComboBox" prefWidth="120.0" />
                     <TextField fx:id="searchField" prefWidth="300.0" promptText="Escribe para buscar..." styleClass="login-field" />
                     <Button fx:id="searchButton" onAction="#handleSearch" styleClass="primary-button" text="Buscar" />
                  </HBox>
                  
                  <Label styleClass="section-subtitle" text="Tip: Escribe al menos 3 caracteres para ver sugerencias automÃ¡ticas" />
               </VBox>
               
               <!-- Resultados de bÃºsqueda -->
               <VBox spacing="10.0">
                  <Label styleClass="section-title" text="Resultados" />
                  
                  <TableView fx:id="searchResultsTable" prefHeight="400.0">
                     <columns>
                        <TableColumn fx:id="searchTitleColumn" prefWidth="200.0" text="TÃ­tulo" />
                        <TableColumn fx:id="searchArtistColumn" prefWidth="150.0" text="Artista" />
                     </columns>
                  </TableView>
               </VBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </VBox>
         </Tab>
         
         <!-- Tab Social (RF-007, RF-008) -->
         <Tab text="ðŸ‘¥ Social">
            <HBox spacing="20.0" styleClass="content-panel">
               
               <!-- Usuarios que sigo -->
               <VBox spacing="15.0" HBox.hgrow="ALWAYS">
                  <Label styleClass="section-title" text="Usuarios que Sigo" />
                  
                  <TableView fx:id="followingTable" prefHeight="300.0">
                     <columns>
                        <TableColumn fx:id="followingUsernameColumn" prefWidth="120.0" text="Usuario" />
                        <TableColumn fx:id="followingNameColumn" prefWidth="150.0" text="Nombre" />
                     </columns>
                  </TableView>
                  
                  <Button fx:id="unfollowUserButton" onAction="#handleUnfollowUser" styleClass="danger-button" text="Dejar de Seguir" />
               </VBox>
               
               <!-- Usuarios sugeridos (RF-008) -->
               <VBox spacing="15.0" HBox.hgrow="ALWAYS">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="section-title" text="Usuarios Sugeridos" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="refreshSuggestionsButton" onAction="#handleRefreshSuggestions" styleClass="secondary-button" text="ðŸ”„ Actualizar" />
                  </HBox>
                  
                  <Label styleClass="section-subtitle" text="Basado en tus conexiones sociales" />
                  
                  <TableView fx:id="suggestedUsersTable" prefHeight="300.0">
                     <columns>
                        <TableColumn fx:id="suggestedUsernameColumn" prefWidth="120.0" text="Usuario" />
                        <TableColumn fx:id="suggestedNameColumn" prefWidth="150.0" text="Nombre" />
                     </columns>
                  </TableView>
                  
                  <Button fx:id="followUserButton" onAction="#handleFollowUser" styleClass="primary-button" text="Seguir Usuario" />
               </VBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </HBox>
         </Tab>
         
      </TabPane>
   </center>
   
   <bottom>
      <!-- Footer con controles de reproducciÃ³n (estÃ©tico) -->
      <HBox alignment="CENTER" prefHeight="60.0" styleClass="sidebar">
         <HBox alignment="CENTER" spacing="20.0">
            <Button styleClass="nav-button" text="â®" />
            <Button styleClass="primary-button" text="â–¶" />
            <Button styleClass="nav-button" text="â­" />
            <Slider prefWidth="200.0" />
            <Label styleClass="field-label" text="0:00 / 3:45" />
         </HBox>
         <Region HBox.hgrow="ALWAYS" />
         <HBox alignment="CENTER" spacing="10.0">
            <Button styleClass="nav-button" text="ðŸ”Š" />
            <Slider prefWidth="80.0" />
         </HBox>
         <padding>
            <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
         </padding>
      </HBox>
   </bottom>
   
</BorderPane>