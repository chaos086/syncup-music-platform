<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.syncup.controllers.UserDashboardController">
   <!-- Sidebar a la izquierda -->
   <left>
      <VBox styleClass="sidebar-modern" spacing="12">
         <!-- BotÃ³n Perfil (cuadro morado) -->
         <Label fx:id="btnProfile" text="ðŸŸª" styleClass="sidebar-button" onMouseClicked="#handleSidebarProfile" />
         <Label text="âŒ‚" styleClass="sidebar-button" onMouseClicked="#handleSidebarHome" />
         <Label text="â™¥" styleClass="sidebar-button" onMouseClicked="#handleSidebarFavorites" />
         <Label text="âœ¨" styleClass="sidebar-button" onMouseClicked="#handleSidebarDiscover" />
         <Label text="ðŸ”Ž" styleClass="sidebar-button" onMouseClicked="#handleSidebarSearchFocus" />
      </VBox>
   </left>

   <top>
      <VBox styleClass="dashboard-header" spacing="10">
         <padding><Insets bottom="10" left="20" right="20" top="10" /></padding>
         <HBox alignment="CENTER_LEFT">
            <VBox>
               <Label fx:id="welcomeLabel" styleClass="dashboard-title" text="Â¡Bienvenido!" />
               <Label fx:id="userStatsLabel" styleClass="dashboard-subtitle" text="" />
            </VBox>
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="logoutButton" onAction="#handleLogout" styleClass="logout-button" text="Cerrar SesiÃ³n" />
         </HBox>
      </VBox>
   </top>

   <center>
      <VBox spacing="16">
         <padding><Insets bottom="16" left="16" right="16" top="16" /></padding>
         <!-- Buscador -->
         <HBox spacing="10">
            <TextField fx:id="searchField" styleClass="search-bar" promptText="Buscar por tÃ­tulo, artista o gÃ©nero..." HBox.hgrow="ALWAYS" />
            <Button fx:id="searchButton" onAction="#handleSearch" text="Buscar" styleClass="primary-button" />
            <Button fx:id="generateDiscoveryButton" onAction="#handleGenerateDiscovery" text="Descubrimiento" styleClass="secondary-button" />
         </HBox>

         <!-- Contenido alternable: CatÃ¡logo, Favoritos y Perfil -->
         <StackPane VBox.vgrow="ALWAYS">
            <VBox fx:id="catalogPane" spacing="10" StackPane.alignment="CENTER">
               <Label styleClass="section-title" text="CatÃ¡logo Musical" />
               <TableView fx:id="songsTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="coverColumn" prefWidth="60.0" text="" />
                     <TableColumn fx:id="titleColumn" prefWidth="250.0" text="TÃ­tulo" />
                     <TableColumn fx:id="artistColumn" prefWidth="200.0" text="Artista" />
                     <TableColumn fx:id="genreColumn" prefWidth="150.0" text="GÃ©nero" />
                     <TableColumn fx:id="yearColumn" prefWidth="100.0" text="AÃ±o" />
                  </columns>
               </TableView>
               <HBox alignment="CENTER_RIGHT">
                  <Button fx:id="addToFavoritesButton" onAction="#handleAddToFavorites" styleClass="favorite-button" text="â™¥ Agregar a Favoritos" />
               </HBox>
            </VBox>

            <VBox fx:id="favoritesPane" spacing="10" visible="false" managed="false">
               <Label styleClass="section-title" text="Mis Favoritos" />
               <TableView fx:id="favoritesTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="favCoverColumn" prefWidth="60.0" text="" />
                     <TableColumn fx:id="favTitleColumn" prefWidth="250.0" text="TÃ­tulo" />
                     <TableColumn fx:id="favArtistColumn" prefWidth="200.0" text="Artista" />
                     <TableColumn fx:id="favGenreColumn" prefWidth="150.0" text="GÃ©nero" />
                  </columns>
               </TableView>
            </VBox>

            <!-- Vista Perfil -->
            <VBox fx:id="profilePane" spacing="12" visible="false" managed="false">
               <Label styleClass="section-title" text="Mi Perfil" />
               <GridPane hgap="12" vgap="8">
                  <columnConstraints>
                     <ColumnConstraints percentWidth="20" />
                     <ColumnConstraints percentWidth="80" />
                  </columnConstraints>
                  <children>
                     <Label text="Nombre:" styleClass="field-label" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                     <Label fx:id="profileName" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                     <Label text="Usuario:" styleClass="field-label" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                     <Label fx:id="profileUsername" GridPane.rowIndex="1" GridPane.columnIndex="1" />

                     <Label text="Correo:" styleClass="field-label" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                     <Label fx:id="profileEmail" GridPane.rowIndex="2" GridPane.columnIndex="1" />

                     <Label text="Siguiendo:" styleClass="field-label" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                     <Label fx:id="profileFollowing" GridPane.rowIndex="3" GridPane.columnIndex="1" />

                     <Label text="Seguidores:" styleClass="field-label" GridPane.rowIndex="4" GridPane.columnIndex="0" />
                     <Label fx:id="profileFollowers" GridPane.rowIndex="4" GridPane.columnIndex="1" />
                  </children>
               </GridPane>
               <Separator />
               <Label styleClass="section-title" text="Mi Biblioteca (Ãlbumes)" />
               <ListView fx:id="albumsList" prefHeight="200" />
            </VBox>
         </StackPane>
      </VBox>
   </center>

   <!-- Player inferior -->
   <bottom>
      <HBox styleClass="player-bar" spacing="16" alignment="CENTER_LEFT">
         <ImageView fx:id="playerCover" fitHeight="40" fitWidth="40" preserveRatio="true" />
         <VBox spacing="2">
            <Label fx:id="playerTitle" styleClass="player-title" text="â€”" />
            <Label fx:id="playerArtist" styleClass="player-artist" text="â€”" />
         </VBox>
         <Region HBox.hgrow="ALWAYS" />
         <HBox spacing="8" styleClass="player-controls" alignment="CENTER">
            <Button fx:id="btnPrev" text="â—€" onAction="#handlePrev" />
            <Button fx:id="btnPlayPause" text="â¯" onAction="#handlePlayPause" />
            <Button fx:id="btnNext" text="â–¶" onAction="#handleNext" />
         </HBox>
         <HBox spacing="8" alignment="CENTER">
            <Label fx:id="playerCurrent" styleClass="player-time" text="0:00" />
            <Slider fx:id="playerSeek" prefWidth="300" />
            <Label fx:id="playerTotal" styleClass="player-time" text="0:00" />
         </HBox>
         <HBox spacing="8" alignment="CENTER_RIGHT">
            <Label text="ðŸ”Š" />
            <Slider fx:id="playerVolume" prefWidth="120" />
         </HBox>
      </HBox>
   </bottom>
</BorderPane>