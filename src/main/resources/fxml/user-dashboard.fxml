<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.syncup.controllers.UserDashboardController">
   <top>
      <VBox styleClass="dashboard-container">
         <HBox alignment="CENTER_LEFT" spacing="20.0">
            <VBox alignment="CENTER_LEFT">
               <Label fx:id="welcomeLabel" styleClass="app-title" text="Bienvenido a SyncUp" />
               <Label fx:id="userStatsLabel" styleClass="app-subtitle" text="Cargando estadisticas..." />
            </VBox>
            <Region HBox.hgrow="ALWAYS" />
            <ProgressIndicator fx:id="loadingIndicator" prefHeight="24.0" prefWidth="24.0" visible="false" />
            <Label fx:id="statusLabel" styleClass="success-message" text="Listo" />
            <padding>
               <Insets bottom="20.0" left="30.0" right="30.0" top="20.0" />
            </padding>
         </HBox>
      </VBox>
   </top>
   
   <center>
      <TabPane tabClosingPolicy="UNAVAILABLE">
         
         <!-- Tab de Perfil -->
         <Tab text="Mi Perfil">
            <VBox spacing="20.0" styleClass="content-panel">
               <VBox spacing="15.0">
                  <Label styleClass="section-title" text="Informacion Personal" />
                  
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="field-label" text="Nombre Completo:" />
                     <TextField fx:id="nombreCompletoField" prefWidth="250.0" promptText="Ingresa tu nombre" styleClass="login-field" />
                  </HBox>
                  
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="field-label" text="Email:" />
                     <TextField fx:id="emailField" prefWidth="250.0" promptText="Ingresa tu email" styleClass="login-field" />
                  </HBox>
                  
                  <Button fx:id="saveProfileButton" onAction="#handleSaveProfile" styleClass="primary-button" text="Guardar Cambios" />
               </VBox>
               
               <Separator />
               
               <!-- Seccion de Favoritos -->
               <VBox spacing="15.0">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="section-title" text="Mis Canciones Favoritas" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="removeFavoriteButton" onAction="#handleRemoveFavorite" styleClass="danger-button" text="Remover" />
                     <Button fx:id="exportFavoritesButton" onAction="#handleExportFavorites" styleClass="secondary-button" text="Exportar CSV" />
                  </HBox>
                  
                  <TableView fx:id="favoritesTable" prefHeight="300.0">
                     <columns>
                        <TableColumn fx:id="favTitleColumn" prefWidth="200.0" text="Titulo" />
                        <TableColumn fx:id="favArtistColumn" prefWidth="150.0" text="Artista" />
                        <TableColumn fx:id="favGenreColumn" prefWidth="100.0" text="Genero" />
                     </columns>
                  </TableView>
               </VBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </VBox>
         </Tab>
         
         <!-- Tab de Descubrimiento -->
         <Tab text="Descubrir">
            <VBox spacing="20.0" styleClass="content-panel">
               
               <VBox spacing="15.0">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="section-title" text="Descubrimiento Semanal" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="generateDiscoveryButton" onAction="#handleGenerateDiscovery" styleClass="primary-button" text="Generar Playlist" />
                  </HBox>
                  
                  <Label styleClass="section-subtitle" text="Musica personalizada basada en tus gustos" />
                  
                  <TableView fx:id="discoveryTable" prefHeight="200.0">
                     <columns>
                        <TableColumn fx:id="discTitleColumn" prefWidth="200.0" text="Titulo" />
                        <TableColumn fx:id="discArtistColumn" prefWidth="150.0" text="Artista" />
                        <TableColumn fx:id="discGenreColumn" prefWidth="100.0" text="Genero" />
                     </columns>
                  </TableView>
                  
                  <Button fx:id="addToFavoritesButton" onAction="#handleAddToFavorites" styleClass="secondary-button" text="Agregar a Favoritos" />
               </VBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </VBox>
         </Tab>
         
         <!-- Tab de Busqueda -->
         <Tab text="Buscar">
            <VBox spacing="20.0" styleClass="content-panel">
               
               <VBox spacing="10.0">
                  <Label styleClass="section-title" text="Busqueda de Musica" />
                  
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <ComboBox fx:id="searchTypeComboBox" prefWidth="120.0" />
                     <TextField fx:id="searchField" prefWidth="300.0" promptText="Escribe para buscar..." styleClass="login-field" />
                     <Button fx:id="searchButton" onAction="#handleSearch" styleClass="primary-button" text="Buscar" />
                  </HBox>
               </VBox>
               
               <VBox spacing="10.0">
                  <Label styleClass="section-title" text="Resultados" />
                  
                  <TableView fx:id="searchResultsTable" prefHeight="400.0">
                     <columns>
                        <TableColumn fx:id="searchTitleColumn" prefWidth="200.0" text="Titulo" />
                        <TableColumn fx:id="searchArtistColumn" prefWidth="150.0" text="Artista" />
                     </columns>
                  </TableView>
               </VBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </VBox>
         </Tab>
         
         <!-- Tab Social -->
         <Tab text="Social">
            <HBox spacing="20.0" styleClass="content-panel">
               
               <VBox spacing="15.0" HBox.hgrow="ALWAYS">
                  <Label styleClass="section-title" text="Usuarios que Sigo" />
                  
                  <TableView fx:id="followingTable" prefHeight="300.0">
                     <columns>
                        <TableColumn fx:id="followingUsernameColumn" prefWidth="120.0" text="Usuario" />
                        <TableColumn fx:id="followingNameColumn" prefWidth="150.0" text="Nombre" />
                     </columns>
                  </TableView>
                  
                  <Button fx:id="unfollowUserButton" onAction="#handleUnfollowUser" styleClass="danger-button" text="Dejar de Seguir" />
               </VBox>
               
               <VBox spacing="15.0" HBox.hgrow="ALWAYS">
                  <HBox alignment="CENTER_LEFT" spacing="10.0">
                     <Label styleClass="section-title" text="Usuarios Sugeridos" />
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="refreshSuggestionsButton" onAction="#handleRefreshSuggestions" styleClass="secondary-button" text="Actualizar" />
                  </HBox>
                  
                  <TableView fx:id="suggestedUsersTable" prefHeight="300.0">
                     <columns>
                        <TableColumn fx:id="suggestedUsernameColumn" prefWidth="120.0" text="Usuario" />
                        <TableColumn fx:id="suggestedNameColumn" prefWidth="150.0" text="Nombre" />
                     </columns>
                  </TableView>
                  
                  <Button fx:id="followUserButton" onAction="#handleFollowUser" styleClass="primary-button" text="Seguir Usuario" />
               </VBox>
               
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
            </HBox>
         </Tab>
         
      </TabPane>
   </center>
   
</BorderPane>